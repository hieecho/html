# HTML存储管理工具 - 技术需求文档

## 1. 项目概述 (Overview)
开发一个桌面应用程序，用于收集、存储和管理各种形式的HTML内容（源代码、网页链接、完整快照），提供分类管理和实时预览功能，解决网页窗口过多和HTML文件丢失的问题。

## 2. 核心功能点 (Core Features)
- **多源HTML导入**：支持粘贴HTML源码、输入URL抓取、拖拽HTML文件、保存完整网页快照
- **智能存储**：自动保存HTML内容及其依赖资源（CSS、JS、图片等）
- **分类管理**：文件夹分类 + 标签系统
- **实时预览**：保持原有交互功能的网页渲染
- **搜索功能**：按标题、标签、内容搜索
- **编辑功能**：支持HTML代码编辑和实时预览

## 3. 技术规格 (Technical Specifications)

### **前端 (Frontend) - 桌面应用界面**

#### **主要界面组件：**
- **左侧边栏：**
  - 文件夹树形结构
  - 标签云显示
  - 搜索框
- **中间列表区：**
  - HTML项目列表（显示标题、类型、创建时间、标签）
  - 列表/网格视图切换
- **右侧预览区：**
  - 内嵌浏览器组件（用于渲染HTML）
  - 代码编辑器（可切换查看源码）
- **顶部工具栏：**
  - 新建按钮（粘贴HTML、输入URL、导入文件）
  - 编辑/删除按钮
  - 导出功能

#### **用户流程：**
1. **添加HTML内容**：点击新建 → 选择导入方式 → 输入内容/URL → 设置标题和标签 → 保存
2. **浏览管理**：在左侧选择分类 → 中间列表选择项目 → 右侧预览/编辑
3. **搜索使用**：输入关键词 → 筛选结果 → 选择查看

#### **数据交互：**
- 向后端请求：获取HTML列表、搜索结果、单个HTML内容
- 向后端发送：新增HTML数据、更新分类标签、删除请求

### **后端 (Backend) - 本地数据服务**

#### **API 接口设计：**
```
GET /api/htmls - 获取所有HTML项目列表
POST /api/htmls - 创建新的HTML项目
GET /api/htmls/:id - 获取特定HTML项目详情
PUT /api/htmls/:id - 更新HTML项目
DELETE /api/htmls/:id - 删除HTML项目
GET /api/htmls/search?q=keyword - 搜索HTML项目
POST /api/htmls/import-url - 通过URL导入网页
GET /api/folders - 获取文件夹结构
POST /api/folders - 创建新文件夹
GET /api/tags - 获取所有标签
```

#### **数据模型：**
```sql
-- HTML项目表
htmls: {
  id: INTEGER PRIMARY KEY,
  title: TEXT,
  content: TEXT,  -- HTML源码
  content_type: TEXT,  -- 'code', 'url', 'snapshot'
  original_url: TEXT,
  folder_id: INTEGER,
  tags: TEXT,  -- JSON数组格式
  resources_path: TEXT,  -- 相关资源文件夹路径
  created_at: DATETIME,
  updated_at: DATETIME
}

-- 文件夹表
folders: {
  id: INTEGER PRIMARY KEY,
  name: TEXT,
  parent_id: INTEGER,
  created_at: DATETIME
}

-- 标签表
tags: {
  id: INTEGER PRIMARY KEY,
  name: TEXT UNIQUE,
  color: TEXT
}
```

## 4. 技术栈建议 (Tech Stack Suggestion)
- **桌面应用框架**：Electron（使用Web技术构建桌面应用）
- **前端框架**：Vue.js 3 + Element Plus UI组件库
- **后端**：Node.js + Express（内嵌在Electron中）
- **数据库**：SQLite（轻量级本地数据库）
- **网页抓取**：Puppeteer（用于获取完整网页快照）
- **代码编辑器**：Monaco Editor（VS Code使用的编辑器）
- **文件管理**：Node.js fs模块

## 5. 开发步骤建议 (Development Steps)

### **第一阶段：项目搭建**
1. 初始化Electron + Vue.js项目结构
2. 设置SQLite数据库和基础数据表
3. 创建基本的三栏布局界面

### **第二阶段：核心功能**
4. 实现HTML内容的增删改查API
5. 开发左侧文件夹树和标签管理
6. 实现中间列表的数据展示

### **第三阶段：预览功能**
7. 集成Monaco Editor代码编辑器
8. 实现右侧HTML预览渲染（使用webview）
9. 添加代码/预览视图切换功能

### **第四阶段：导入功能**
10. 实现HTML代码粘贴功能
11. 开发URL网页抓取功能（使用Puppeteer）
12. 添加HTML文件拖拽导入

### **第五阶段：高级功能**
13. 实现搜索功能（标题、内容、标签）
14. 添加标签管理和颜色标记
15. 实现数据导出功能

### **第六阶段：优化完善**
16. 添加快捷键支持
17. 性能优化和错误处理
18. 打包和发布准备
